# Lotto 자동 추출 시스템

이 프로젝트는 **Github Actions**를 활용해 로또 최신 회차 정보를 자동으로 파싱하고, 5분마다 최신 데이터를 저장/업데이트하는 자동화 시스템입니다.

---

## 구성 파일 및 동작 원리

### 1. `last_lotto_round_number.py`
- **동작**: 동행복권 홈페이지에서 최신 로또 회차 번호를 가져와서 JSON 파일(`src/constant/round_no/latest_round_no.json`)로 저장합니다.
- **주요 기능**
    - 웹사이트 메인 페이지에서 최신 회차 번호를 추출
    - 결과를 JSON 파일로 저장 (예: `{"latest_round_no": 1135}`)
    - 직접 실행 시 최신 번호 출력 및 저장

### 2. `lotto_number_parser.py`
- **동작**: 지정한 로또 회차 번호의 상세 당첨 결과를 동행복권 웹에서 파싱해 구조화된 JSON(`src/constant/draw_no/{회차}.json`)으로 저장합니다.
- **주요 기능**
    - 해당 회차 번호의 당첨일, 당첨번호, 보너스번호, 등수별 당첨 정보, 총판매금액 등 파싱
    - 결과를 보기 쉬운 JSON 포맷으로 저정 (회차별 개별 파일 생성)
- **파싱 흐름**
    1. 회차별 결과 페이지에 요청
    2. 날짜, 당첨번호, 보너스, 당첨금, 당첨기준, 문구 등을 추출
    3. 파일로 저장

### 3. 자동화: `auto_lotto_update.yml` (Github Actions Workflow)
- **실행 주기**: _5분마다_ 자동으로 실행 (cron: `*/5 * * * *`)
- **자동화 순서**
    1. **최신 회차 번호 추출**  
       → `last_lotto_round_number.py` 실행 <br>→ 최신 번호 JSON 저장
    2. **(선택) 상세 정보 파싱 및 저장**  
       → 해당 회차의 상세 JSON 파일이 없으면<br>`lotto_number_parser.py {회차}` 실행 후 저장
    3. **Github 저장소에 자동 commit/push**  
       → 새로운 데이터 생성 시에만 add/commit/push 진행

### 전체 동작 플로우
- 5분마다 워크플로우가 구동됨
- 최신 회차를 확인하여, 만약 새로운 회차 데이터가 저장소에 없을 경우 자동으로 상세 정보를 수집해 커밋/푸시
- 항상 최신의 로또 데이터 JSON 파일을 소유하게 됨

---

## 파일 구조 예시

```
src/
 └── constant/
      ├── round_no/
      │    └── latest_round_no.json   # 최신 회차 번호 정보
      └── draw_no/
           ├── 1133.json             # 회차별 상세 정보
           ├── 1134.json
           └── 1135.json
```


---

## 요약

- **최신 로또 회차 번호**와 **해당 회차의 상세 추첨 정보**를 자동으로 주기적으로 파싱/저장합니다.
- **Github Actions**를 활용해 5분마다 데이터를 체크 & 업데이트하며, 최신 데이터가 있을 때만 저장소에 푸시됩니다.
- 파싱 스크립트(`last_lotto_round_number.py`, `lotto_number_parser.py`)는 각각 역할 분담되어 깔끔하게 관리됩니다.

---

### 문의/참고
- 동행복권 공식사이트: [https://dhlottery.co.kr/](https://dhlottery.co.kr/)
- Python 환경에서 구동/개발됩니다.
- 추가 문의사항은 이 문서 상단 또는 담당자에게 연락 바랍니다.

---

**본 시스템은 로또 데이터를 자동 관리, 집계, 활용하려는 프로젝트에 적합합니다.**
